Bootstrap: docker
From: haggarwa/diffusion_pipelines:latest

%environment
    # Path settings
    export PATH=/opt/Convert3D/c3d-1.0.0-Linux-x86_64/bin:/opt/miniconda3/bin:/opt/freesurfer/freesurfer/bin:/opt/freesurfer/freesurfer/tktools:/opt/freesurfer/freesurfer/mni/bin:/opt/ANTS/ants-2.4.4/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
    
    # System settings
    export DEBIAN_FRONTEND=noninteractive
    export INSTALL_DIR=/opt
    
    # ANTs settings
    export ANTSPATH=/opt/ANTS/ants-2.4.4/bin
    export OS=Linux
    
    # FreeSurfer settings
    export FS_OVERRIDE=0
    export FIX_VERTEX_AREA=
    export FSF_OUTPUT_FORMAT=nii.gz
    export FREESURFER_HOME=/opt/freesurfer/freesurfer
    export SUBJECTS_DIR=/opt/freesurfer/freesurfer/subjects
    export FUNCTIONALS_DIR=/opt/freesurfer/freesurfer/sessions
    export MNI_DIR=/opt/freesurfer/freesurfer/mni
    export LOCAL_DIR=/opt/freesurfer/freesurfer/local
    
    # MINC settings
    export MINC_BIN_DIR=/opt/freesurfer/freesurfer/mni/bin
    export MINC_LIB_DIR=/opt/freesurfer/freesurfer/mni/lib
    export MNI_DATAPATH=/opt/freesurfer/freesurfer/mni/data
    export PERL5LIB=/opt/freesurfer/freesurfer/mni/lib/perl5/5.8.5
    export MNI_PERL5LIB=/opt/freesurfer/freesurfer/mni/lib/perl5/5.8.5
    
    # Locale settings
    export LANG=C.UTF-8
    export LC_ALL=C.UTF-8

%runscript
    # Preserve the exact ENTRYPOINT from the Docker image
    exec /opt/miniconda3/bin/diffusion_pipelines "$@"